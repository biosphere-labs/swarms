---
name: DecompositionEngine — LLM-based task splitting
status: closed
created: 2026-02-11T21:01:30Z
updated: 2026-02-11T21:01:30Z
depends_on: []
parallel: true
conflicts_with: []
---

# Task: DecompositionEngine — LLM-based task splitting

## Description
Implement the DecompositionEngine class that analyzes a complex task via LLM and produces a sub-task graph with parallel groups and dependencies. This is the core intelligence that decides how to split work.

## Acceptance Criteria
- [ ] DecompositionEngine class with `decompose(task: str) -> SubTaskGraph` method
- [ ] LLM call with structured JSON output for sub-task graph
- [ ] Sub-task graph contains: parallel groups, dependencies between groups, context hints per sub-task
- [ ] Anti-collapse heuristics: detect and prevent serial collapse (single-agent fallback when parallelism is possible)
- [ ] Anti-spurious-parallelism heuristics: detect tasks too simple to parallelize
- [ ] Complexity threshold: skip decomposition for simple tasks, return single-task graph
- [ ] Configurable model for the decomposition LLM call

## Technical Details
- File: `swarms/structs/decomposition_engine.py`
- Uses LiteLLM for LLM calls (existing wrapper in framework)
- Output format: dict with `parallel_groups` (list of lists of sub-tasks) and `dependencies` (edges between groups)
- Each sub-task has: `id`, `description`, `context_hints`, `expected_output_format`
- Heuristics are hardcoded checks (not trained weights) — checks for: task length, keyword patterns, explicit sub-task markers
- Uses Pydantic models for SubTask and SubTaskGraph schemas

## Dependencies
- [ ] None (standalone module, uses only LiteLLM)

## Effort Estimate
- Size: L
- Hours: 8-12
- Parallel: true (no dependencies on other new modules)

## Definition of Done
- [ ] Code implemented
- [ ] Unit tests written and passing
- [ ] Handles edge cases: empty task, single-word task, already-simple task
- [ ] Returns valid SubTaskGraph for complex multi-part tasks
