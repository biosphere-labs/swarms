---
name: PARLOrchestrator — Main orchestration class
status: closed
created: 2026-02-11T21:01:30Z
updated: 2026-02-11T21:01:30Z
depends_on: [001, 002, 003, 004, 005]
parallel: false
conflicts_with: []
---

# Task: PARLOrchestrator — Main orchestration class

## Description
Implement the main PARLOrchestrator class that wires together DecompositionEngine, CriticalPathScheduler, ContextShardingManager, and ResultAggregator. Inherits from BaseSwarm for clean framework integration.

## Acceptance Criteria
- [ ] PARLOrchestrator class inheriting from BaseSwarm
- [ ] `run(task: str) -> str` method implementing the full orchestration flow
- [ ] Configurable orchestrator model (strong) and sub-agent model (cheap)
- [ ] Uses existing `run_agents_concurrently()` from multi_agent_exec for parallel execution
- [ ] Single-agent fallback: if decomposition determines task is too simple, execute directly
- [ ] Optional iteration loop: if gaps found, re-decompose and fill (max 2 iterations)
- [ ] Token budget tracking: stop spawning if budget exceeded, synthesize what we have
- [ ] Handles sub-agent failures: collect partial results, flag incomplete sub-tasks
- [ ] Timeout handling per sub-agent and overall

## Technical Details
- File: `swarms/structs/parl_orchestrator.py`
- Inherits BaseSwarm (existing abstract class)
- Constructor params: orchestrator_model, sub_agent_model, max_parallel, max_iterations, timeout, token_budget
- Flow: decompose → schedule → shard contexts → execute parallel cohorts → aggregate → optional loop
- Uses existing Agent class for sub-agents (create instances dynamically)
- Uses existing multi_agent_exec.run_agents_concurrently() for parallel execution
- Error handling: try/except per sub-agent, collect partial results on failure

## Dependencies
- [ ] 001 - DecompositionEngine
- [ ] 002 - ContextShardingManager
- [ ] 003 - CriticalPathScheduler
- [ ] 004 - ResultAggregator
- [ ] 005 - Prompts

## Effort Estimate
- Size: XL
- Hours: 12-16
- Parallel: false (depends on all component modules)

## Definition of Done
- [ ] Code implemented
- [ ] Integration tests with all components
- [ ] Full flow works: decompose → execute → aggregate
- [ ] Single-agent fallback works for simple tasks
- [ ] Handles failures gracefully
